

#include "drawings.h"


//global variables

	
	
// image of space invader
// each image of element of the game
// is saved as matrix

const uint8_t space_welcome[] = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xE0, 0xF8, 0xFF, 0xFF, 0xFF,
  0xFF, 0xFF, 0xFF, 0xFF, 0x7F, 0x7F, 0x7F, 0x7F, 0x7F, 0xFF, 0xFF, 0xFF, 0x7F, 0x7F,
  0x7F, 0x7F, 0x7F, 0x7F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x7F, 0x7F, 0x7F, 0xFF, 0xFF,
  0xFF, 0xFF, 0xFF, 0xFF, 0x7F, 0x7F, 0x7F, 0x7F, 0xFF, 0xFF, 0xFF, 0x7F, 0x7F, 0x7F,
  0x7F, 0x7F, 0x7F, 0x7F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
  0xFF, 0xFE, 0xF0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0xF0, 0xF0, 0xF0, 0xF8, 0xF8, 0xFC, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
  0xFF, 0xFF, 0x7F, 0x78, 0xF0, 0xE7, 0xE7, 0x4F, 0x0E, 0xFE, 0xFF, 0x0F, 0x00, 0xEC,
  0xEF, 0xEF, 0xE7, 0xF0, 0xFD, 0x3F, 0x1F, 0x87, 0xB1, 0xBE, 0xBC, 0x00, 0x1F, 0xFF,
  0xFF, 0x83, 0x01, 0x7C, 0xFF, 0xFF, 0xFF, 0x7E, 0xFE, 0xFF, 0x1F, 0x00, 0xF0, 0xF7,
  0xF7, 0xF7, 0xF7, 0xF7, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFC, 0xF8, 0xF0, 0xF0, 0xE0, 0xC0, 0xC0, 0x80, 0x80,
  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x7F, 0x7F, 0xFF, 0x7F, 0x7F,
  0xFF, 0xFF, 0xFF, 0xFE, 0x7E, 0xFE, 0xFE, 0x7E, 0xFF, 0xFF, 0xFF, 0xFE, 0xFF, 0xFF,
  0x7F, 0xFF, 0xFF, 0xFF, 0xFE, 0x7E, 0x7F, 0x7F, 0xFF, 0xFF, 0xFF, 0xFE, 0x7E, 0x7F,
  0x7F, 0x7F, 0x7F, 0xFE, 0xFE, 0xFE, 0xFE, 0x7F, 0x7F, 0x7F, 0x7E, 0x7E, 0x7E, 0x7E,
  0xFE, 0xFE, 0x7E, 0x7F, 0x7F, 0x7F, 0x7F, 0x7F, 0xFF, 0xFF, 0xFF, 0xFF, 0x7F, 0x7F,
  0x7F, 0x7F, 0x7F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x07, 0xC0, 0xFE, 0x0F, 0x80, 0xFC,
  0xF1, 0x0F, 0x3F, 0x00, 0xF8, 0xFF, 0xFF, 0xE0, 0x00, 0x7F, 0x3F, 0x8F, 0xE3, 0xF8,
  0xFE, 0x3F, 0x1F, 0x87, 0xB1, 0xBE, 0xBC, 0x00, 0x1F, 0xFF, 0xFF, 0x0F, 0x00, 0xF8,
  0xFF, 0xFF, 0x7F, 0x00, 0xC1, 0xFF, 0x1F, 0x00, 0xF0, 0xF7, 0xF7, 0xF7, 0xF7, 0xF7,
  0xFF, 0x0F, 0x00, 0xE8, 0xEF, 0xCF, 0x0F, 0x32, 0xF0, 0xFF, 0x7F, 0x78, 0xF0, 0xE7,
  0xE7, 0x4F, 0x0E, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
  0x0F, 0x0F, 0x0F, 0x1F, 0x3F, 0x3F, 0x7F, 0xFE, 0xFE, 0xFF, 0xFF, 0xFE, 0xFF, 0xFF,
  0xFF, 0xFF, 0xFE, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFE, 0xFE, 0xFE, 0xFF, 0xFF, 0xFF,
  0xFE, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFE, 0xFE, 0xFF, 0xFF, 0xFE, 0xFE, 0xFE,
  0xFE, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFF,
  0xFF, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFE, 0xFF, 0xFF, 0xFF, 0xFE, 0xFE, 0xFE,
  0xFE, 0x7E, 0x1F, 0x1F, 0x0F, 0x07, 0x03, 0x03, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x07, 0x3F, 0xFF, 0xFF, 0xFF,
  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x3F, 0x07, 0x01,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

const uint8_t ground[] = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x00,
  0x80, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x00, 0xA0, 0x00, 0xA0, 0x00, 0xA0, 0x00,
  0xA0, 0x00, 0xA0, 0x00, 0xA0, 0x00, 0xA0, 0x00, 0xA0, 0x00, 0xA0, 0x00, 0x80, 0x00,
  0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0xAA, 0x00, 0xAA, 0x00, 0xAA, 0x00, 0xAA, 0x00, 0xAA, 0x00, 0xAA, 0x00, 0xAA, 0x00,
  0xAA, 0x00, 0xAA, 0x00, 0xAA, 0x00, 0xAA, 0x00, 0xAA, 0x00, 0xAA, 0x00, 0xAA, 0x00,
  0xAA, 0x00, 0xAA, 0x00, 0xAA, 0x00, 0xAA, 0x00, 0xAA, 0x00, 0xAA, 0x00, 0xAA, 0x00,
  0xAA, 0x00, 0xAA, 0x00, 0xAA, 0x00, 0xAA, 0x00, 0xAA, 0x00, 0xAA, 0x00, 0xA8, 0x00,
  0xA8, 0x00, 0xA8, 0x00, 0xA8, 0x00, 0xA8, 0x00, 0xA8, 0x00, 0xA8, 0x00, 0xA8, 0x00,
  0xA8, 0x00, 0xA8, 0x00, 0xA8, 0x00, 0xA8, 0x00, 0xA8, 0x00, 0xA8, 0x00, 0xA8, 0x00

};


const uint8_t pause[] = {
  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x7F, 0x1F, 0x07, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x01, 0x0F, 0x7F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
  0x0F, 0x0F, 0x0F, 0x07, 0x07, 0x03, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x07, 0x0F, 0x0F, 0x1F, 0x3F, 0x3F, 0x7F, 0x7F,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0xFC, 0xFE,
  0x9E, 0x8E, 0xCE, 0xFE, 0xFE, 0x7C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xC0, 0x60,
  0x38, 0xFC, 0xFC, 0xFE, 0x00, 0x00, 0x00, 0x00, 0xE0, 0xFC, 0xFC, 0x1E, 0x00, 0x00,
  0x00, 0x00, 0x80, 0xE0, 0xFC, 0x7C, 0x1E, 0x00, 0x00, 0xE0, 0xF0, 0xF8, 0x9C, 0x9C,
  0x8E, 0x8E, 0x8E, 0x0E, 0x0C, 0x00, 0x00, 0xE0, 0xFC, 0xFE, 0x9E, 0x8E, 0x8E, 0x8E,
  0x8E, 0x8E, 0x0E, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0xF8, 0x7F, 0x3F, 0x07, 0x03,
  0x03, 0x03, 0x01, 0x01, 0x00, 0xC0, 0xE0, 0x78, 0x1C, 0x0E, 0x0F, 0x0F, 0x0E, 0x0E,
  0x7E, 0xFF, 0xFF, 0x01, 0x00, 0x00, 0x18, 0x7F, 0xFF, 0xFF, 0xE0, 0xE0, 0xE0, 0x70,
  0x38, 0x1E, 0x0F, 0x07, 0x01, 0x00, 0x70, 0xF8, 0xF8, 0xE1, 0xE3, 0xE3, 0x63, 0x73,
  0x7F, 0x3F, 0x1F, 0x02, 0x00, 0xF8, 0xFF, 0xFF, 0xE7, 0xE3, 0xE3, 0xE3, 0xE3, 0x63,
  0x03, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0xF0, 0xF0, 0xF0, 0xE0, 0xC0, 0xC0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x80, 0xE0, 0xE0, 0xF0, 0xF8, 0xFC, 0xFC, 0xFE, 0xFE, 0xFE, 0xFF, 0xFF, 0xFF,
  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFC, 0xF8, 0xC0, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xF8, 0xFE,
  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF
};


const uint8_t bomber [15][14] =
  { {0,0,0,0,0,0,0,0,0,0,0,0,0,0 },
{0,1,1,1,0,0,0,0,0,0,0,0,0,0 },
{0,1,1,1,1,1,0,0,0,0,0,0,0,0 },
{0,1,1,1,1,1,1,0,0,0,0,0,0,0 },
{0,1,1,1,1,1,1,1,1,0,0,0,0,0 },
{0,1,1,1,1,1,1,1,1,1,1,0,0,0 },
{0,1,0,0,0,0,0,0,1,1,1,1,1,0 },
{0,1,0,0,0,0,0,0,1,1,1,1,1,0 },
{0,1,0,0,0,0,0,0,1,1,1,1,0,0 },
{0,1,1,1,1,1,1,1,1,1,1,0,0,0 },
{0,1,1,1,1,1,1,1,0,0,0,0,0,0 },
{0,1,1,1,1,1,1,0,0,0,0,0,0,0 },
{0,1,1,1,0,0,0,0,0,0,0,0,0,0 },
{0,1,1,0,0,0,0,0,0,0,0,0,0,0 },
{0,0,0,0,0,0,0,0,0,0,0,0,0,0 } };
	

const uint8_t enemy [9][19] =
{ {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },
{0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0 },
{0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0 },
{0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0 },
{0,1,1,1,0,1,1,0,1,1,0,1,1,1,0,1,1,0,0 },
{0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0 },
{0,0,1,1,1,1,0,0,1,1,1,0,0,1,1,1,1,0,0 },
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 } };
	
	
const uint8_t bomb [4][8] =
{ {0,0,0,0,0,0 },
{0,1,1,1,1,0 },
{0,1,1,1,1,0 },
{0,0,0,0,0,0 } }	;
	
	



int bx = 4, by = 24 , ex1 = 90, ey1 = 4, ex2 = 90  , ey2 =  15 , ox1 = -1  , oy1, ox2 = -1 ,oy2;
uint8_t new_screen [504];	
int live = 3;



/**
function: Delay1ms
input: number of msec
output: wait the specified ms
notes
**/
void Delay1ms(unsigned long msec){
	unsigned long volatile time;
  //time =	msec * 727240*2/91;  // 1 m sec original
	time =	msec * 727240 /93;  // 1 m sec
	while(time  ){
		time--;
   }
}


/**
function: merge_object
input: object type , x position , y position
output: none
notes: it merges the specified object in the displayed matrix
**/
void merge_object( char object_num  , int   x , int y  ) 
{
			int i , j; 
			int index = x  +   (y/8)  * 84;
			int step  = 0;
			int shift = 0 ;
		  int rows  = get_rows(object_num) ; 
	    int cols  = get_cols(object_num);
	
	
			if (x > 84 )
				return;
	
			for	( j = 0 ; j < rows ; j ++)
			for ( i = 0 ; i < cols ; i++)
		{
			step =  ( ( j / 8 )  + (( ( j % 8 ) +  ( y % 8 ) ) / 8) )  * 84 ;
			shift = ( ( j % 8 ) +  ( y % 8 ) ) % 8 ;
			
			if ( ( ( index % 84 )+ i ) >= 84    ||   ( ( index % 84 )+ i ) < 0  ) 
			continue;
			switch (object_num)
			{
				case 'b':
				new_screen [ index + i +   step ]  |= bomber[j][i] <<   shift;
				break;
				case 'e':
				new_screen [ index + i +   step ]  |= enemy[j][i] <<   shift;
				break;
				case 'o':
				new_screen [ index + i +   step ]  |= bomb[j][i] <<   shift;
				break;
			}
			
		
		}
	
}



/**
function: update_pos
input: old slider pot value , new slider pot value
output: none
notes: it changes the position of the bomber by the movement of the slider potential
**/
void update_pos(long oldValue , long ADCvalue)
{

	
			if(ox1 != -1)
				ox1 += 5;

			if(ox2 != -1)
				ox2 += 5;
		
			
			if(ox1 >= 84)
				ox1 = -1;

			if(ox2 >= 84)
				ox2 = -1;
		
			
			by = by - ( ( oldValue - ADCvalue ) / 100);
			
			if( by < 0 ) by = 1;
			if(by > 47 ) by = 47;
			
			ex1 -= 5;
			ex2 -= 5;
			if ( ex1 < 0)
			{ 
			ex1 = 90;
			ey1 = rand() % 29;
			}
			
			if ( ex2 < 0)
			{ 
			ex2 = 90;
			ey2 = rand() % 29;
			}
			
			

}



/**
function: update_diaplay
input: none
output: none
notes: it merges many objects and displays the new image on screen
**/
void update_diaplay(void)
{
				int i ;
				for ( i = 0 ; i < 504 ; i++)
						new_screen [i] = ground[i];
				
						merge_object(  'b'  , bx , by );
						merge_object(  'e'  , ex1  , ey1 );
						merge_object(  'e'  , ex2 , ey2 );
						
						if( ox1 != -1 )
							merge_object(  'o'  , ox1 , oy1 );
						
						if( ox2 != -1 )
							merge_object(  'o'  , ox2 , oy2 );
	
						for ( i = 0 ; i < live ; i++)	
						 {
						 new_screen[i * 2 ] |= 0x03;  
						 }
	
						Nokia5110_Clear();  
						Nokia5110_DrawFullImage(new_screen);  
						Delay1ms(100);                    // delay ~1 sec at 50 MHz
		
}



/**
function: get_rows
input: type of object
output: the objects hight
notes: 
**/
int get_rows(char object)
{
switch (object)
{
	case 'b':
		return 15;
	case 'e':
		return 9;
	case 'o':
		return 4;
}  
return 0;
}
	

/**
function: get_cols
input: type of object
output: the objects width
notes: 
**/
int get_cols(char object)
{
	
	switch (object)
{
	case 'b':
		return 12;
	case 'e':
		return 19;
	case 'o':
		return 6;
}  
return 0;
}


/**
function: pauser
input: none
output: none
notes: displays pause image on the screen
**/
void pauser(void)
{
		Nokia5110_DrawFullImage(pause);
		Delay1ms(10);
}

/**
function: welcomer
input: none
output: none
notes: displays welcome image on the screen
**/
void welcomer(void)
{
	Nokia5110_DrawFullImage(space_welcome);
	Delay1ms(1000);                    // delay ~1 sec at 50 MHz
}

/**
function: gameOver
input: score
output: none
notes: displays game over image on the screen with your result
**/
void gameOver(uint32_t score)
{
// code for printing game over with score			
			Nokia5110_Clear();
			Nokia5110_OutString("   ******       GAME        OVER       ******   SCORES:");
			Nokia5110_OutUDec(score);		
}



void start_pos (long ADCvalue)
{
by = ADCvalue / 86;
}


void set_life(int l)
{
		live = l;
}


/**
function: shoot
input: none
output: none
notes: adds new bomb on the screen
note2: you are limited to have two bombs on screen in the same time
**/
void shoot (void)
{

		if( ox1 == -1 )
		{
				ox1 = bx + get_cols('b') ;
				oy1 = by + ( get_rows('b') / 2 ) - 2 ;
				 bomb_sound();
		}	
		else if (ox2 == -1 )
		{
				ox2 = bx + get_cols('b') ;
				oy2 = by + ( get_rows('b') / 2 ) - 2  ;
			  bomb_sound();
		}

}


/**
function: check_enemy
input: none
output: score
notes: checks if any of the enemies has been killed
note2: if enemy killed you are get 5 points
note3: every second you stand in the game you get +1 score
**/
int check_enemy(void)
{

	
	int l = get_cols('o') - 1 ;
	int h = get_rows('o') - 1 ;
	int le = get_cols('e') - 2  ;
	int he  = get_rows('e') - 2 ;
	int i , j ; 
	int temp  = ox1 + 1 + h;
	int temp2  = oy1 + 1 + l;

	if(ox1 == -1 && ox2 == -1)
	return 0 ;

	for( i = ox1  ; i < temp ;  i++  )
	for( j = oy1   ; j < temp2 ;  j++  )
	{
	if(( i > ex1 && i < ex1 + le && j > ey1 && j < ey1 + he) &&  ox1 != -1 )
	{
	ox1 = -1;
	ex1 = 90;
	ey1 = rand() % 29;
	enemy_sound();
	return 50;
	}
	else if ( ( i > ex2 && i < ex2 + le && j > ey2 && j < ey2 + he) && ox1 != -1 ) 
	{
	ox1 = -1;
	ex2 = 90;
	ey2 = rand() % 29;
	enemy_sound();
	return 50;
	}
	}
	
	
	 temp  = ox2 + 1 + h;
	 temp2  = oy2 + 1 + l;
	for( i = ox2 + 1  ; i < temp ;  i++  )
	for( j = oy2 + 1  ; j < temp2 ;  j++  )
	{
	if( ( i > ex1 && i < ex1 + le && j > ey1 && j < ey1 + he) && ox2 != -1 ) 
	{
	ox2 = -1;
	ex1 = 90;
	ey1 = rand() % 29;
	enemy_sound();
	return 50;
	}
	else if ( ( i > ex2 && i < ex2 + le && j > ey2 && j < ey2 + he) && ox2 != -1 )
	{
		
	ox2 = -1;
	ex2 = 90;
	ey2 = rand() % 29;
	enemy_sound();
	return 50;
	}
	}
	return 0;
}


/**
function: check_bomber
input: none
output: none
notes: checks if the bomber has been hurted by enemies
note2: if hurted you live decrease by 1
**/
void check_bomber()
{
	//bx + 2 , by + 2
	int l = get_cols('b') - 2 ;
	int h = get_rows('b') - 2 ;
	//ex1 + 2 , ey1 + 2 
	int le = get_cols('e') - 3  ;
	int he  = get_rows('e') - 3 ;
	int i , j ; 
	int temp  = bx + 2 + h;
	int temp2  = by + 2 + l;
	for( i = bx + 2   ; i < temp ;  i++  )
	for( j = by + 2  ; j < temp2 ;  j++  )
	{
	if( i > ex1 && i < ex1 + le && j > ey1 && j < ey1 + he)
	{
	live--;
	ex1 = 90;
	ey1 = rand() % 29;
	bomber_sound();
	}
	else if ( i > ex2 && i < ex2 + le && j > ey2 && j < ey2 + he)
	{
	live--;
	ex2 = 90;
	ey2 = rand() % 29;
	bomber_sound();
	}
	
	}
}
int check_death(void) 
{
	check_bomber() ;
	return check_enemy();
	 
}


int getLive (void)
{
return live;
}


